#{extends 'content.html' /}
#{set title:'Modules List' /}

<h1>Administration of Modules :</h1>

<p>Here the complete list of all the modules hosted inside this repository.</p>

<div id="modules">
#{list items:modules.modules, as:'module'}
    <div class="module">
        <h2>[${module.name}]&nbsp;${module.fullname} [#{a @Admin.delete(module.id)}Delete#{/a}]</h2>
        <p>${module.description}</p>
        <p>#{a @Admin.show(module.id)}Get details and versions#{/a}</p>
    </div>
#{/list}
#{else}
    <p>There is no module in this repository.</p>
#{/else}
</div>

<h1>Admin actions :</h1>

<button id="addModuleCommand" class="buttons" type="submit" class="positive">Add a module</button>

<div id="addModule" style="display:none;">
#{form @Admin.add()}
    <p>
    <div>
        <label>Enter the name of the module :</label>
    </div>
    <div>
        <input type="text" name="name" />
    </div>
    </p>
    <p>
    <div>
        <label>Enter the full name :</label>
    </div>
    <div>
        <input type="text" name="fullname" />
        <span id="submit"><button id="addModuleSubmit" class="buttons" type="submit" class="positive">Add</button></span>
    </div>
    </p>
#{/form}
</div>

<script>
    $("#addModuleCommand").click(function () {
      if ($("#addModule").is(":visible")) {
    	  $("#addModule").hide();
      } else {
    	  $("#addModule").show();
      }
    });
</script>